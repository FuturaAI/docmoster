@no_auth path /authelia*

forward_auth authelia:9091 {
  uri /api/authz/forward-auth
  not @no_auth
  copy_headers Remote-User Remote-Groups Remote-Email Remote-Name
}

# Authelia UI
auth.docs.futuraaigroup.com {
    reverse_proxy authelia:9091
}

# Docmost - con login interna
docs.futuraaigroup.com {
  @authelia path /authelia*
  handle @authelia {
    import authelia_proxy
  }

  @no_auth path /authelia*

  forward_auth authelia:9091 {
    uri /api/authz/forward-auth
    not @no_auth
    copy_headers Remote-User Remote-Groups Remote-Email Remote-Name
  }

  reverse_proxy docmost:3000
}

# Portainer - anche lui ha la sua login
portainer.docs.futuraaigroup.com {
  @authelia path /authelia*
  handle @authelia {
    import authelia_proxy
  }

  @no_auth path /authelia*

  forward_auth authelia:9091 {
    uri /api/authz/forward-auth
    not @no_auth
    copy_headers Remote-User Remote-Groups Remote-Email Remote-Name
  }

  reverse_proxy portainer:9000
}
